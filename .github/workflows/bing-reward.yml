name: Bing Reward 定时执行

on:
  schedule:
    - cron: '0 0 * * *'  # 北京时间8点执行（UTC 0点）
  workflow_dispatch:

jobs:
  run-bing-reward:
    runs-on: ubuntu-22.04
    permissions:
      contents: read

    steps:
      - name: 检出仓库代码
        uses: actions/checkout@v4

      # 删除「进入 Bing 奖励脚本目录」这一步（多余且报错）
      
      - name: 安装环境依赖
        run: |
          # 移除 cd bing-reward（关键修复）
          chmod +x setup_ubuntu.sh
          sudo ./setup_ubuntu.sh

      - name: 运行 Bing 奖励脚本
        run: |
          # 移除 cd bing-reward（关键修复）
          chmod +x start_bing_reward.sh
          ./start_bing_reward.sh

      # 可选：保存日志（若脚本有日志文件，按实际路径调整）
      - name: 保存运行日志
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: bing-reward-logs
          path: |
            ./*log*  # 根目录下的所有日志文件
            /tmp/*   # 临时目录日志（如有）
